<div class="nav-shell">

  <!-- Left: navegación -->
  <section class="nav-left">
    <header class="nav-head">
      <div class="nav-head-text">
        <h3>Gráficos</h3>
        <p>Selecciona una vista para explorar métricas</p>
      </div>

      <div class="nav-head-pill">Vistas</div>
    </header>

  

    <!-- principal -->
    <button
      mat-raised-button
      class="nv-btn nv-btn--main"
      [class.is-active]="selectedComponent === 'todos'"
      (click)="cambiarGrafico('todos')"
    >
      <mat-icon>dashboard</mat-icon>
      <span>Panel principal</span>
      <span class="nv-kbd">⌘1</span>
    </button>

    <div class="nav-divider"></div>

    <!-- grid categorías (filtradas) -->
    <div class="nv-grid">
      <button
        *ngFor="let item of navItemsFiltered"
        mat-raised-button
        class="nv-btn"
        [class.is-active]="selectedComponent === item.key"
        (click)="cambiarGrafico(item.key)"
      >
        <mat-icon>{{ item.icon }}</mat-icon>
        <span>{{ item.label }}</span>
      </button>
    </div>
  </section>

  <!-- Right: filtros -->
  <aside class="nav-right">
    <header class="nav-head">
      <div class="nav-head-text">
        <h3>Filtros</h3>
        <p>Rango de fechas + cuentas</p>
      </div>

      <div class="nav-head-pill subtle">Aplicar</div>
    </header>

    <mat-form-field appearance="outline" class="field">
      <mat-label>Rango de fechas</mat-label>
      <mat-date-range-input [rangePicker]="picker">
        <input matStartDate placeholder="Inicio" [(ngModel)]="startDate">
        <input matEndDate placeholder="Fin" [(ngModel)]="endDate">
      </mat-date-range-input>
      <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
      <mat-date-range-picker #picker></mat-date-range-picker>
    </mat-form-field>

    <mat-form-field appearance="outline" class="field">
      <mat-label>Seleccionar usuarios</mat-label>
      <mat-select [(ngModel)]="selectedUsers" multiple>
        <mat-option *ngFor="let user of users" [value]="user.idTweetUser">
          {{ user.TweetUser }}
        </mat-option>
      </mat-select>
      <mat-hint>Opcional: filtra por cuentas</mat-hint>
    </mat-form-field>

    <div class="actions">
      <button
        mat-raised-button
        class="nv-action nv-action--primary"
        (click)="aplicarFechas()"
      >
        <mat-icon>check</mat-icon>
        <span>Aplicar filtros</span>
      </button>

      <button
        mat-button
        class="nv-action nv-action--ghost"
        type="button"
        (click)="resetFiltros()"
      >
        <mat-icon>restart_alt</mat-icon>
        <span>Limpiar</span>
      </button>
    </div>

    <!-- mini resumen -->
    <div class="filters-summary">
      <div class="fs-row">
        <span class="fs-k">Vista</span>
        <span class="fs-v mono">{{ selectedComponent }}</span>
      </div>
      <div class="fs-row">
        <span class="fs-k">Usuarios</span>
        <span class="fs-v mono">{{ selectedUsers.length || 0 }}</span>
      </div>
    </div>
  </aside>

</div>

<!-- Contenido inferior (gráficos) -->
<div class="chart-container">
  <app-todos *ngIf="selectedComponent === 'todos'"
    [startDate]="startDate" [endDate]="endDate" [selectedUsers]="selectedUsers"></app-todos>

  <app-politica-estadisticas *ngIf="selectedComponent === 'politica'" categoria="politica"
    [startDate]="startDate" [endDate]="endDate" [selectedUsers]="selectedUsers"></app-politica-estadisticas>

  <app-politica-estadisticas *ngIf="selectedComponent === 'economia'" categoria="economia"
    [startDate]="startDate" [endDate]="endDate" [selectedUsers]="selectedUsers"></app-politica-estadisticas>

  <app-politica-estadisticas *ngIf="selectedComponent === 'deportes'" categoria="deportes"
    [startDate]="startDate" [endDate]="endDate" [selectedUsers]="selectedUsers"></app-politica-estadisticas>

  <app-politica-estadisticas *ngIf="selectedComponent === 'seguridad'" categoria="seguridad"
    [startDate]="startDate" [endDate]="endDate" [selectedUsers]="selectedUsers"></app-politica-estadisticas>

  <app-politica-estadisticas *ngIf="selectedComponent === 'social'" categoria="social"
    [startDate]="startDate" [endDate]="endDate" [selectedUsers]="selectedUsers"></app-politica-estadisticas>

    <app-politica-estadisticas *ngIf="selectedComponent === 'ambiente'" categoria="ambiente"
    [startDate]="startDate" [endDate]="endDate" [selectedUsers]="selectedUsers"></app-politica-estadisticas>

  <app-politica-estadisticas *ngIf="selectedComponent === 'salud'" categoria="salud"
    [startDate]="startDate" [endDate]="endDate" [selectedUsers]="selectedUsers"></app-politica-estadisticas>

  <app-politica-estadisticas *ngIf="selectedComponent === 'educacion'" categoria="educacion"
    [startDate]="startDate" [endDate]="endDate" [selectedUsers]="selectedUsers"></app-politica-estadisticas>

  <app-politica-estadisticas *ngIf="selectedComponent === 'gestiones'" categoria="gestiones"
    [startDate]="startDate" [endDate]="endDate" [selectedUsers]="selectedUsers"></app-politica-estadisticas>

  <app-politica-estadisticas *ngIf="selectedComponent === 'otros'" categoria="otros"
    [startDate]="startDate" [endDate]="endDate" [selectedUsers]="selectedUsers"></app-politica-estadisticas>

  <app-estadisticas-enti-personas *ngIf="selectedComponent === 'entidades'" categoria=""
    [startDate]="startDate" [endDate]="endDate" [selectedUsers]="selectedUsers" [type_user]="'Entidad'"></app-estadisticas-enti-personas>

  <app-estadisticas-enti-personas *ngIf="selectedComponent === 'personas'" categoria=""
    [startDate]="startDate" [endDate]="endDate" [selectedUsers]="selectedUsers" [type_user]="'Persona'"></app-estadisticas-enti-personas>
</div>
